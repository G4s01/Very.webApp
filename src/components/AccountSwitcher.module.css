/* AccountSwitcher styles — compact palette, reset icon bottom-right half-out, close X top-right half-out.
   Palette is 3x4 (3 columns × 4 rows), swatches compact (16px).
*/

/* accountSwitcherRoot is the fixed left rail wrapper used by TopBar/main to compute offset.
   Root width matches the visual .card width (96px) and the .card is centered horizontally
   inside the rail so there is no extra unused space to the right.
*/
.accountSwitcherRoot {
  position: fixed;
  left: 12px; /* gap from page left to AccountSwitcher start (reference gap) */
  top: 12px;
  bottom: var(--bottombar-height, 72px);
  width: 96px;    /* same as .card width */
  min-width: 96px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  z-index: 60;
  pointer-events: auto;
  user-select: none;
  align-items: center; /* center the visual .card horizontally inside the rail */
}

/* legacy name kept for compatibility (mapping to root) */
.wrapper { display: none; }

/* card inside the rail (visual panel) */
.card {
  background: #fff;
  border-radius: 14px;
  padding: 10px 8px;
  border: 1px solid rgba(3,10,18,0.04);
  box-shadow: 0 8px 24px rgba(9,30,66,0.03);
  width: 96px;
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  transition: border-color 240ms ease, box-shadow 240ms ease;
  overflow: visible;
}

.card.hasAccent::before {
  content: '';
  position: absolute;
  left: 10px;
  right: 10px;
  top: -6px;
  height: 6px;
  border-radius: 6px;
  background: var(--card-accent, transparent);
  box-shadow: 0 8px 20px rgba(0,0,0,0.06);
  transition: background 240ms ease, opacity 240ms ease;
  opacity: 1;
}

.itemWrap {
  position: relative;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.listWrap {
  position: relative;
  flex: 1 1 auto;
  min-height: 0;
  width: 100%;
}
.list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 6px 4px;
  max-height: calc(100vh - 32px - var(--bottombar-height, 72px));
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  align-items: center;
  overflow-x: hidden;
}

.accountBtn {
  background: #fff;
  border: 1px solid rgba(3,10,18,0.04);
  width: 64px;
  height: 64px;
  padding: 6px;
  border-radius: 14px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform 140ms ease, box-shadow 140ms ease;
  outline: none;
  box-shadow: 0 6px 18px rgba(9,30,66,0.03);
  min-width: 0;
}

.accountBtn.hasCustom {
  border-color: rgba(0,0,0,0.06);
  box-shadow: 0 8px 22px rgba(9,30,66,0.04);
}

.accountBtn:hover,
.accountBtn:focus {
  transform: translateY(-3px);
  box-shadow: 0 10px 26px rgba(9,30,66,0.06);
}

.selected {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 12px 30px rgba(9,30,66,0.08);
  border-color: rgba(3,10,18,0.06);
}

.tile {
  width: 52px;
  height: 52px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(180deg,#eef3f6,#e8eef2);
  color: #0b2430;
  font-weight: 800;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
  overflow: hidden;
  transition: box-shadow 240ms ease, transform 160ms ease, background 240ms ease;
}

.flash {
  animation: accountFlash 420ms ease-out;
}
@keyframes accountFlash {
  0% { transform: scale(1.04); box-shadow: 0 14px 26px rgba(10,30,50,0.14); }
  60% { transform: scale(0.995); box-shadow: 0 6px 12px rgba(10,30,50,0.08); }
  100% { transform: scale(1); box-shadow: none; }
}

.tile img { width:100%; height:100%; object-fit:cover; display:block; }
.initials { font-size: 20px; letter-spacing: 0.6px; line-height: 1; }

.paletteBtn {
  position: absolute;
  right: 8px;
  top: -8px;
  width: 22px;
  height: 22px;
  border-radius: 6px;
  background: #fff;
  border: 1px solid rgba(3,10,18,0.06);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(9,30,66,0.06);
  padding: 2px;
  transition: transform 120ms ease;
}
.paletteBtn:hover { transform: translateY(-2px); }

/* palette popover (portal): compact 176px, 3x4 grid */
.paletteMenu {
  width: 176px; /* inline width is set from TS as well */
  background: #fff;
  border-radius: 10px;
  border: 1px solid rgba(3,10,18,0.06);
  box-shadow: 0 12px 30px rgba(9,30,66,0.12);
  padding: 16px 10px 16px 10px; /* top and bottom padding matched */
  z-index: 120;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: fixed; /* inline style sets top/left */
}

/* close X top-right, half outside */
.closeX {
  position: absolute;
  right: -12px;
  top: -12px;
  width: 28px;
  height: 28px;
  border-radius: 10px;
  background: #fff;
  border: 1px solid rgba(3,10,18,0.06);
  box-shadow: 0 6px 14px rgba(9,30,66,0.08);
  cursor: pointer;
  font-size: 14px;
  line-height: 1;
  color: #22333b;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0;
}
/* hover: X becomes red */
.closeX:hover {
  color: #e53935;
  border-color: rgba(229,57,53,0.12);
}

.paletteGrid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  justify-items: center;
  margin: 0 auto;
}

.swatch {
  width: 16px;
  height: 16px;
  border-radius: 6px;
  border: 1px solid rgba(0,0,0,0.06);
  cursor: pointer;
  transition: transform 90ms ease, box-shadow 90ms ease;
}
.swatch:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(9,30,66,0.08); }

.swatchSelected {
  outline: 2px solid rgba(10,132,255,0.18);
  box-shadow: 0 6px 18px rgba(9,30,66,0.08);
}

.resetIcon {
  position: absolute;
  right: -12px;
  bottom: -18px;
  width: 32px;
  height: 32px;
  border-radius: 10px;
  background: #fff;
  border: 1px solid rgba(3,10,18,0.06);
  box-shadow: 0 6px 14px rgba(9,30,66,0.08);
  cursor: pointer;
  font-size: 14px;
  line-height: 1;
  color: #22333b;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0;
}
.resetIcon:hover { background: rgba(3,10,18,0.03); }

.bottomHint {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 36px;
  pointer-events: none;
  opacity: 0;
  transition: opacity 160ms ease;
  background: linear-gradient(180deg, rgba(255,255,255,0), rgba(0,0,0,0.06));
}
.bottomHint.visible { opacity: 1; }

@media (max-width: 900px) {
  .accountSwitcherRoot { display: none; }
}